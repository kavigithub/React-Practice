<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      //async function getUser(){
      const getUser = async () => {
        //fetch is a promise which doesn't executed right away
        //so u need wait for it...so we used await
        try {
          const response = await fetch(
            "https://jsonplaceholder.typicode.com/users"
          );
          // if(response.status === 404) {
          if (!response.ok) {
            throw new Error("Page  not found");
          }
          //js engine will wait till promise to resolved
          //function execution suspended till promise resolve and once it resolve it will resume
          const data = await response.json();
          console.log(" promise to resolved");
          console.log(data);
        } catch (error) {
          console.log(error);
          document.write(error);
        }
      };
      getUser();

      //with promise
      function getUserWithPromise() {
        //js engine will NOT wait till promise to resolved
        fetch("https://jsonplaceholder.typicode.com/users")
          .then((response) => response.json())
          .then((data) => console.log(data));
        console.log(" promise not wait");
      }
      getUserWithPromise();

      ///what is async await
        //async is key word which is used when we have function which take some time to perform
        //u have to used await inside async to handle promises
        //async function always return Promise
        //we want our code to be asynchronous
        //async and await are used to handle Promise
        //explain how function execution suspended till promise resolve and once it resolve it will resume from where it suspended

      //What is Promises
        // Promises are used to handle asynchronous operations in JavaScript.
        // where callbacks can create callback hell leading to unmanageable code
       

      //HOw fetch works
        //The fetch() method in JavaScript is used to request data from a server. fetch retuns a promise
        //fetch returns response ...then we need to convert this resonse body into .json
    </script>
  </body>
</html>
